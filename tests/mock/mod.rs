mod ethash_proof;
mod ethash_proof_codec;
mod hash;
mod header;
mod header_thing;
mod mock_header_19;

pub use ethash_proof::{DAG_NODES, PROOF};
pub use ethash_proof_codec::ETHASH_PROOF_CODEC;
pub use hash::HASHES;
pub use header::HEADER;
pub use header_thing::ETH_HEADER_THING;
pub use mock_header_19::MOCK_HEADER_19;
use scale::Decode;

use darwinia_shadow::{
    bytes,
    chain::eth::{EthHeader, EthashProof},
    hash::H256,
};

/// Hash array for tests
pub fn ha() -> [[u8; 32]; 10] {
    let mut hashes = [[0; 32]; 10];
    (0..10).for_each(|i| hashes[i] = <[u8; 32] as H256>::from(HASHES[i]));
    hashes
}

/// Block Number ffi ports
pub fn header() -> EthHeader {
    EthHeader::decode(&mut bytes!("0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b4211dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d493478011bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fad7f8974fb5ac78d9ac099b9ad5018bedc2ce0a72dad1827a1709da30580f054456e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000881300000000000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000884a000000000000000000000000000000000000000000000000000000000000000002488000000000000004201d4e56740f876aef8c010b86a40d5f56745a118d0906a34e69aec8c0db1cb8fa3").as_ref()).unwrap()
}

/// Generate DoubleNodeWithMerkleProof
pub fn proof() -> EthashProof {
    EthashProof::from_tuple(DAG_NODES, PROOF)
}
